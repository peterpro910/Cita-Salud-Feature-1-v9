<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CITASalud - Iniciar Sesi√≥n</title>
    <link rel="stylesheet" href="../css/login.css?v=2">
</head>
<body>
    <div class="main-content">
        <div class="login-container">
            <h1>Iniciar Sesi√≥n en CITASalud</h1>

            <div id="message-container" class="message-container hidden" role="alert" aria-live="assertive"></div>

            <form id="login-form">
                <div class="input-group">
                    <label for="documento">N√∫mero de documento de identidad:</label>
                    <!-- Eliminado tabindex="1" -->
                    <input type="text" id="documento" name="documento" required aria-required="true">
                </div>

                <div class="input-group">
                    <label for="password">Contrase√±a:</label>
                    <div class="password-group">
                        <!-- Eliminado tabindex="2" -->
                        <input type="password" id="password" name="password" required aria-required="true">
                        
                        <!-- REEMPLAZADO: span con role="button" por un elemento button nativo para mejor accesibilidad -->
                        <!-- A√ëADIDO: onkeydown para asegurar el manejo de teclado si fuera necesario, aunque el bot√≥n lo maneja por defecto. -->
                        <button type="button" class="password-toggle" id="toggle-password" aria-label="Mostrar contrase√±a" onkeydown="/* Logic in login.js */">
                            üîí
                        </button>
                    </div>
                </div>

                <!-- Eliminado tabindex="4" -->
                <button type="submit" id="login-button" class="btn primary">Iniciar Sesi√≥n</button>

                <!-- Eliminado tabindex="5" -->
                <a href="#" id="forgot-password-link">¬øOlvid√≥ su contrase√±a?</a>
            </form>
        </div>
    </div>

    <!-- CORRECCI√ìN: Usando <dialog> en lugar de <div> con role="dialog" para accesibilidad nativa -->
    <dialog id="forgot-password-modal" class="modal hidden"
        aria-labelledby="forgot-password-title">
        <div class="modal-content">
            <!-- Cambiado span a button y tabindex eliminado ya que button es enfocable por defecto -->
            <button type="button" class="close-button" id="close-forgot-modal" aria-label="Cerrar modal">&times;</button>
            <h2 id="forgot-password-title">Recuperar Contrase√±a</h2>
            <p>Ingrese su n√∫mero de documento de identidad. Le enviaremos un correo para restablecerla.</p>

            <div id="forgot-message" class="message-container hidden" role="alert" aria-live="assertive"></div>

            <form id="forgot-password-form">
                <div class="input-group">
                    <label for="forgot-documento">Documento de identidad:</label>
                    <input type="text" id="forgot-documento" name="documento" required>
                </div>
                <button type="submit" class="btn primary">Enviar Correo</button>
            </form>
        </div>
    </dialog>

    <!-- CORRECCI√ìN: Usando <dialog> en lugar de <div> con role="dialog" para accesibilidad nativa -->
    <dialog id="session-active-modal" class="modal hidden"
        aria-labelledby="session-active-title">
        <div class="modal-content">
            <h2 id="session-active-title">Alerta de Sesi√≥n Activa</h2>
            <p id="session-active-msg">Ya tiene una sesi√≥n activa en otro dispositivo. ¬øDesea cerrar la sesi√≥n anterior
                e iniciar una nueva?</p>
            <div class="button-group">
                <button type="button" id="force-login-button" class="btn primary">Cerrar sesi√≥n anterior e
                    Iniciar</button>
                <button type="button" id="cancel-login-button" class="btn secondary">Cancelar</button>
            </div>
        </div>
    </dialog>

    <!-- CORRECCI√ìN: Usando <dialog> en lugar de <div> con role="dialog" para accesibilidad nativa -->
    <dialog id="permission-modal" class="modal hidden">
        <div class="modal-content">
            <!-- Cambiado span a button -->
            <button type="button" class="close-button" aria-label="Cerrar">&times;</button>
            <h2 id="modal-title">‚ùå Acceso Restringido</h2>
            <p id="modal-message">No tiene permisos para acceder al m√≥dulo de gesti√≥n de citas. Si cree que esto es un
                error, comun√≠quese con nosotros al correo **notificaciones.citasalud@gmail.com**.</p>
            <button id="modal-back-button" class="btn btn-primary">Volver al Inicio de Sesi√≥n</button>
        </div>
    </dialog>

    <script src="../js/login.js"></script>
</body>
</html>